# Import of products

###1.Импорт продуктов.

Компания-поставщик предоставляет CSV-файл со списком товаров. Пример: products.csv. Необходимо предоставить возможность загрузки файла. После загрузки файл должен быть обработан. Информацию о каждом товаре необходимо сохранить в отдельный файл в папке "products" на сервере.

Файл должен иметь следующий вид: {sku}.txt

sku:51q997
name:Preppy Shorts
description:97% Baumwolle / 3% Elastan
is_enabled:yes
is_in_stock:yes
qty:45
price:79.95
special_price:
size:27
color_id:890
color:black
image_url:http://cdn.richandroyal.de/media/external/D/51q997_890_1_455.jpg

Если товар активен (Is Enabled == yes), то файл должен лежать в папке "products/enabled". Если товар неактивен, то в папке "products/disabled".

К данным товара, полученым от поставщика нужно добавить ссылку на фото товара. Ссылка строится по следующему шаблону:

http://cdn.richandroyal.de/media/external/D/{sku}_{color-id}_1_455.jpg

{sku} нужно заменить на SKU товара. Если в sku есть пробелы, их нужно заменить на '-'.

{color-id} нужно заменить на Color Id из файла.
###2. отображение продуктов.

Необходимо реализовать отображение продуктов. Активные продукты хранятся в папке "products/enabled". Нужно считать все файлы и вывести список товаров на экран.

Если у товара есть специальная цена, нужно вывести обычную цену зачеркнутой, а рядом специальную.

Нужно предоставить возможность сортировать список по имени и по цене по возрастанию и по убыванию. По умолчанию список должен быть отсортирован по цене. Параметры сортировки должны передаваться с помощью GET-запроса.

# Authorization & Cookies

1. Для задачи с импортом и отображением продуктов реализовать авторизацию.
Страницы загрузки и просмотра товаров должны быть доступны только авторизованому пользователю. При попытке зайти на закрытые страницы пользователь должен быть перенаправлен на страницу авторизации. Пример:
<?php
if (!isLoggedIn()) {
    header('Location: login.php'); // Посылаем заголовок перенаправления.
    exit();
}
// ...
В случае неудачной авторизации (неправильный пароль или не существующий пользователь) нужно показать соответствующее сообщение об ошибке.
Список пользователей, которые могут авторизоваться, должен храниться в файле на сервере в следующем формате:
%email%:%password_hash%
Пример:
john@example.com:098f6bcd4621d373cade4e832627b4f6
denis@example.com:5a105e8b9d40e1329780d62ea2265d8a
...
После авторизации на страницах загрузки просмотра товаров должно отображаться имя пользователя. В качестве имени можно взять первую часть электронной почты:
john@example.com -> John
denis@example.com -> Denis
Либо можно добавить имя в файл с пользователями.
После авторизации возле имени пользователя должна быть кнопка "Log out" (или "Выйти"). При нажатии на нее авторизация должна сброситься, а пользователь должен попасть на страницу с формой авторизации.
Форма авторизации должна быть недоступна для авторизованого пользователя.

2. На странице просмотренных продуктов последняя используемая сортировка должна сохраняться в Cookies пользователя. При повтороном открытии страницы без параметров сортировки (в URL) должно использоваться значение, взятое из Cookies.
